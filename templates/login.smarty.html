<script src="{$selfPath}/js/jquery.min.js"></script>
<script type="text/javascript"></script>

<form id="login-form" name="login-form" method="post" action="login.php" onSubmit="return Log(this)">

<table class="data">
<tr class="{cycle values='A,B'}">
    <td class="field" width="60">Username:</td>
    <td class="values"><input type="text" name="login" value="" class="input" /></td>
</tr>
<tr class="{cycle values='A,B'}">
    <td class="field">Password:</td>
    <td class="values"><input type="password" name="password" value="" class="input" /></td>
</tr>   
<tr class="{cycle values='A,B'}">
    <td class="field">&nbsp;</td>
    <td class="values">
        <input type="submit" name="login-action" value="Login" class="submit" />
    </td>
</tr>
</table>
</form>
<script>
function Log (f) 
{
    var url = '{$selfPath}/authorization';
    $.ajax({
        type: "POST",
        url: url,
        data: 'ajax=1&'+$(f).serialize(),
        success: function(txt){
            if ( txt == 'OK' )
                alert('succ')
            else
                alert(txt)
        },
        error: function(){
            alert('Ошибка сети, попробуйте позже')
        }
    });
    return false;
}
</script>
